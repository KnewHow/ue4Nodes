# Day19-声音

## 1 UE4 声音概述

UE4 支持任意采样率、最高八个通道、16位或者24位PCM格式的wav 文件

* PCM 是一种音频格式数据，指的是将连续抽样。组合成离散数据的组合方式。

  ![image-20200528093704601](../images/image-20200528093704601.png)

* 声音通道：声道

* ![image-20200528094157801](../images/image-20200528094157801.png)

* 采样率：每秒钟从连续信号中采集数据的次数

  8000Hz: 电话声音

  22050Hz: 一半广播电台的声音

  44100Hz: CD 唱碟

### 1.1 SoundWave(音频波形)

声音信息：

![image-20200528094743091](../images/image-20200528094743091.png)

### 1.2 Play Sound 2D

忽略位置的播放，全局都能听到

![image-20200528095114172](../images/image-20200528095114172.png)

 音量：

![image-20200528095348691](../images/image-20200528095348691.png)

音调：	

![image-20200528095405622](../images/image-20200528095405622.png)

开始时间：

![image-20200528095629525](../images/image-20200528095629525.png)



### 1.2 Sound Attenuation （声音衰减）

新建声音衰减：

![image-20200528095833386](../images/image-20200528095833386.png)

位置播放，可以提供衰减设置：

![image-20200528100013780](../images/image-20200528100013780.png)

衰减界面：

![image-20200528100603654](../images/image-20200528100603654.png)

衰减方法：

![image-20200528100529926](../images/image-20200528100529926.png)



衰减类型：

![image-20200528102140008](../images/image-20200528102140008.png)

衰减空间化：

![image-20200528104450847](../images/image-20200528104450847.png)

3d: 立体声扩散：

![image-20200528104758787](../images/image-20200528104758787.png)

### 1.3 Ambient Sound(环境音)

![image-20200528101402900](../images/image-20200528101402900.png)



设置衰减后，产生一个衰减半径：

![image-20200528101615086](../images/image-20200528101615086.png)

然后可以在声音衰减的设置中进行配置。



### 1.4 Sound Cue

可以理解为将多个音轨混合的一个类，在里面可以对多个音轨进行混合，他说可以被播放的。

应用：声音的蓝图节点，在不改变 Actor 的情况下，调整音乐。

创建：

![image-20200528110624176](../images/image-20200528110624176.png)

使用：

![image-20200528111135390](../images/image-20200528111135390.png)

可用节点：

![image-20200528110931096](../images/image-20200528110931096.png)

在 SoundVue 定义参数`musicType`：

![image-20200528111537877](../images/image-20200528111537877.png)

是否可以循环播放：

![image-20200528112508614](../images/image-20200528112508614.png)

![image-20200528111507669](../images/image-20200528111507669.png)

在蓝图中使用调用参数`musicType`:

![image-20200528112725092](../images/image-20200528112725092.png)

#### 1.4.1 声音调制器(Continous Modular)：

![image-20200528113627573](../images/image-20200528113627573.png)

#### 1.4.2 淡入淡出和延迟

![image-20200528113813313](../images/image-20200528113813313.png)

#### 1.4.3 多普勒效应

![image-20200528113933490](../images/image-20200528113933490.png)

#### 1.4.4 包若线

![image-20200528114301800](../images/image-20200528114301800.png)



#### 1.4.5 组切换

![image-20200528114436109](../images/image-20200528114436109.png)

#### 1.4.6 成人节点

![image-20200528114533158](../images/image-20200528114533158.png)

#### 1.4.7  混音器

![image-20200528114637589](../images/image-20200528114637589.png)

#### 1.4.8 振荡器

![image-20200528114812053](../images/image-20200528114812053.png)

#### 1.4.9 清晰度

![image-20200528114944228](../images/image-20200528114944228.png)

#### 1.4.10  声音随机

![image-20200528120034881](../images/image-20200528120034881.png)

#### 1.4.11 播放节点

![image-20200528115517633](../images/image-20200528115517633.png)

上面的节点的官方文档：https://docs.unrealengine.com/zh-CN/Engine/Audio/SoundCues/NodeReference/index.html



## 2 Sound Class

可以理解 Sound Class 是一个配置(分类)，例如：背景音乐，特效音乐和对话。所有的音轨可以使用他的配置。

![image-20200528134106973](../images/image-20200528134106973.png)

参数信息：

![image-20200528134236804](../images/image-20200528134236804.png)

批量设置：

![image-20200528135117911](../images/image-20200528135117911.png)

批量的使用 Soud Class

![image-20200528134444575](../images/image-20200528134444575.png)



## 3 Sound Class Mix

调音台：

![image-20200528134603791](../images/image-20200528134603791.png)

在调音台中引用具体某个`Sound Class`:

![image-20200528134725971](../images/image-20200528134725971.png)

这样可以通过`Sound Class Mix` 来统一的控制音量。

### 3.1 使用 Sound Class Mix 推送来播放

1. 创建一个自定义的 Sound Class

   ![image-20200528143035032](../images/image-20200528143035032.png)

2.  将自定义的 `Sound Cue` 绑定到 `Music`的 Sound Class

![image-20200528143157677](../images/image-20200528143157677.png)

3. 中关卡蓝图中打开`Sound Class Mix` 推送，并且播放我们的`MySoundCue`:

   ![image-20200528143413505](../images/image-20200528143413505.png)

   

4. 修改声音的大小：![image-20200528143554380](../images/image-20200528143554380.png)



## 4 调试声音

### 4.1 Show Sound Waves

显示场景中有多少声音

![image-20200528141444219](../images/image-20200528141444219.png)

![image-20200528141706101](../images/image-20200528141706101.png)

### 4.2 Stat Sound Mix

![image-20200528141734453](../images/image-20200528141734453.png)

### 4.3 Stat Sound Cues

### 4.4 Stat Sounds

![image-20200528141952666](../images/image-20200528141952666.png)

![image-20200528141935455](../images/image-20200528141935455.png)



## 5 用户设置

### 5.1 获取用户设置

![image-20200528150723559](../images/image-20200528150723559.png)

### 5.2 设置屏幕分辨率

![image-20200528151435456](../images/image-20200528151435456.png)

### 5.3 获取当前显卡的分别率列表

![image-20200528153015617](../images/image-20200528153015617.png)

也就是下面这个东西：

![image-20200528153105373](../images/image-20200528153105373.png)

设置屏幕分辨率：

![image-20200528150533612](../images/image-20200528150533612.png)

	### 5.3 垂直同步

设置垂直同步：

![image-20200528151511129](../images/image-20200528151511129.png)

### 5.4 设置帧速率

![image-20200528151836427](../images/image-20200528151836427.png)