# Day16-代理

## 1 代理分类

### 1.1 概述

![image-20200608092231072](../images/image-20200608092231072.png)

### 1.2 单播代理

![image-20200608092548961](../images/image-20200608092548961.png)

### 1.3 多播代理

![image-20200608092645633](../images/image-20200608092645633.png)

### 1.4 代理在 C++中的定义

![image-20200608093304093](../images/image-20200608093304093.png)

根据 `DYNAMIC`来判断动态还是静态，根据`MULTICAST` 来判断多播还是单播。

### 1.5 代理参数

代理支持参数，我们可以根据后面接的参数来声明我们需要的参数信息：

![image-20200608093642668](../images/image-20200608093642668.png)

### 1.6 代理返回值

当然，代理也可以带返回值：

![image-20200608093801074](../images/image-20200608093801074.png)

### 1.7 代理名称

![image-20200608095628906](../images/image-20200608095628906.png)

### 1.8 定义代理变量

![image-20200608094055241](../images/image-20200608094055241.png)

### 1.9 打印数据到屏幕和控制台

![image-20200608100511320](../images/image-20200608100511320.png)

### 1.10 C++ 连接字符串方法

![image-20200608102535022](../images/image-20200608102535022.png)

## 2 单播代理

### 2.1 声明

![image-20200608162343944](../images/image-20200608162343944.png)



### 2.2 绑定并使用

![image-20200608162431473](../images/image-20200608162431473.png)

### 2.3 带参数的情况

![image-20200608102230994](../images/image-20200608102230994.png)



### 2.4 带返回值的情况

![image-20200608105005944](../images/image-20200608105005944.png)



### 2.5 C++ Lambda 表达式

![image-20200608113040898](../images/image-20200608113040898.png)



### 2.5 绑定方法

![image-20200608110703207](../images/image-20200608110703207.png)

#### 2.5.1 Lambda 绑定

![image-20200608113912573](../images/image-20200608113912573.png)



#### 2.5.2 UFunction绑定

UFunction 绑定一个类的成员函数

![image-20200608115601752](../images/image-20200608115601752.png)

绑定到代理中：

![image-20200608115705528](../images/image-20200608115705528.png)

#### 2.5.3 Static 函数绑定

首先在头文件中声明一个静态函数：

![image-20200608135151325](../images/image-20200608135151325.png)

在.cpp文件中实现它：

![image-20200608135223361](../images/image-20200608135223361.png)

使用代理绑定：

![image-20200608135246908](../images/image-20200608135246908.png)



#### 2.5.4 标准 C++ 类

![image-20200608141628943](../images/image-20200608141628943.png)

指针相关概念：

![image-20200608142640942](../images/image-20200608142640942.png)



执行 delete 方法后，会自动执行析构函数。

#### 2.5.5 智能指针

又叫做：弱指针

![image-20200608143931884](../images/image-20200608143931884.png)

#### 2.5.6 UE4 new 对象

![image-20200608145959164](../images/image-20200608145959164.png)

#### 2.5.7 弱指针和指针的绑定

1. 声明指针变量

   ![image-20200608151531076](../images/image-20200608151531076.png)

2. 实现构造函数和成员函数

   ![image-20200608151606676](../images/image-20200608151606676.png)

3. 声明指针类型和共享指针类型

   ![image-20200608151824244](../images/image-20200608151824244.png)

4. 绑定到对应的代理中

   ![image-20200608151956078](../images/image-20200608151956078.png)



## 3 多播代理

### 3.1 声明多播代理

![image-20200608155048826](../images/image-20200608155048826.png)

### 3.2 声明变量类型

![image-20200608155150458](../images/image-20200608155150458.png)

### 3.3 使用多播代理

![image-20200608155208510](../images/image-20200608155208510.png)



## 4 动态多播代理

### 4.1 代理声明

此时一定要使用分号。

![image-20200608155453390](../images/image-20200608155453390.png)

### 4.2 变量声明

![image-20200608155537306](../images/image-20200608155537306.png)

### 4.3 在蓝图中使用

![image-20200608161154698](../images/image-20200608161154698.png)

可以看见看到我们**事件调度器**就是使用这种方式来实现的。